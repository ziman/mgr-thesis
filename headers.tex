%% Verze pro jednostranný tisk:
% Okraje: levý 40mm, pravý 25mm, horní a dolní 25mm
% (ale pozor, LaTeX si sám přidává 1in)
%\documentclass[12pt,a4paper]{report}
%\setlength\textwidth{145mm}
%\setlength\textheight{247mm}
%\setlength\oddsidemargin{15mm}
%\setlength\evensidemargin{15mm}
%\setlength\topmargin{0mm}
%\setlength\headsep{0mm}
%\setlength\headheight{0mm}
% \openright zařídí, aby následující text začínal na pravé straně knihy
%\let\openright=\clearpage

%% Pokud tiskneme oboustranně:
\documentclass[12pt,a4paper,twoside,openright,reqno]{book}
%\documentclass[12pt,a4paper,symmetric,twoside,justified,nofonts,nohyper]{tufte-book}

%\setlength\topmargin{0mm}
%\setlength\headsep{0mm}
%\setlength\headheight{0mm}
%\setlength\textheight{247mm}

\setlength{\headsep}{3em}
%\setlength\textwidth{145mm}
%\setlength\textwidth{145mm}
%\setlength\oddsidemargin{15mm}
%\setlength\evensidemargin{15mm}
\let\openright=\cleardoublepage

\usepackage{etex}

%% Ostatní balíčky
\usepackage{graphicx}
\usepackage{amsmath, amsthm}
%\usepackage{amssymb, amsfonts} not compatible with Minion Pro
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage[all,cmtip]{xy}
\usepackage{textcomp}
\usepackage{subfloat}
\usepackage{graphicx}
\usepackage{lmodern}
\usepackage{microtype}
\usepackage[utf8]{inputenc}
\usepackage{booktabs}
\usepackage{a4wide}
\usepackage{comment}
\usepackage{array}
\usepackage[lofdepth,lotdepth]{subfig}
%\usepackage{natbib}
%\usepackage{tgpagella}
%\usepackage{tgcursor}
\usepackage{MinionPro}
\usepackage{wrapfig}
\usepackage{titlesec}
\usepackage{tikz}
\usetikzlibrary{decorations.pathreplacing,patterns}

\usepackage[Sonny]{fncychap}
\makeatletter
	\ChNumVar{\Huge}
	\ChTitleVar{\LARGE\rm\it}
	\ChNameVar{\Large\sc}
	\ChNameAsIs
\makeatother

\titleformat{\section}[block]{\centering\rm\itshape}{\Large\thesection}{1ex}{\Large}
\titlespacing*{\section}{0ex}{20pt}{10pt}
\titleformat{\subsection}{\rm}{\large\thesection}{1ex}{\large}
\titlespacing*{\subsection}{0ex}{23pt}{10pt}
\titleformat{\subsubsection}{\rm\bf}{}{0pt}{}
\titlespacing*{\subsubsection}{0ex}{15pt}{5pt}

\newcommand{\scons}{:-:\;}
\newcommand{\sconsh}{!-!\;}
\newcommand{\void}{$\square$}
\newcommand{\tick}{$\checkmark$}
\newcommand{\bN}{\mathbb{N}}
\newcommand{\excp}{\;!\:}

\usepackage{listings}
\lstloadlanguages{Haskell}
\lstnewenvironment{code}
    {\lstset{}%
      \csname lst@SetFirstLabel\endcsname}
    {\csname lst@SaveFirstLabel\endcsname}
    \lstset{
      comment=[l]--,
      basicstyle=\small\sffamily,
      keywordstyle=\bf\sffamily,
      commentstyle=\color{gray}\it\rmfamily,
      columns=fullflexible,
      basewidth={0.5em,0.45em},
      escapechar=&,
%      xleftmargin=1em,
      morekeywords={data,where,open,import,let,with,module,using,infixr,rewrite,mutual},
      literate=
      	{+}{{$+\;$}}1
      	{/}{{$/$}}1
      	{*}{{$*$}}1
      	{=}{{$=\;$}}1
        {>}{{$>$}}1
        {<}{{$<$}}1
        {\\lam}{{$\lambda$}}1
        {\\\\}{{\char`\\\char`\\}}1
       	{->}{{$\rightarrow\;$}}2
       	{>=}{{$\geq$}}2
       	{<-}{{$\leftarrow$}}2
        {<=}{{$\leq$}}2
        {=>}{{$\Rightarrow\;$}}2 
        {\\...}{{$\cdots$}}2
        {\ .}{{$\circ$}}2
        {\ .\ }{{$\circ$}}2
        {>>}{{>>}}2
        {>>=}{{>>=}}2
        {|}{{$\mid\:$}}1
        {Nat}{{$\mathbb{N}\;$}}1
        {forall}{{$\forall\;$}}1
        {\\scons}{{\scons}}1
        {\\sconsh}{{\sconsh}}1
        {\\void}{{\void}}1
        {\\tick}{{\tick}}1
	  	{\\nil}{{$\varepsilon\;$}}1
	  	{\\bN}{{$\bN\;$}}1
	  	{\\x}{{$\times$}}1
	  	{\\excp}{{\excp}}1
	  	{==}{{$\equiv\;$}}1
		{<|}{{$\lhd\;\,$}}1
        {\\app}{{$\lhd\!\lhd\;\,$}}1
        {~}{{$\neg\:$}}1
        {[[}{{[\![\;}}1
        {]]}{{]\!]\;}}1
        {\\;}{{\;}}1
        {\\-}{{-}}1
        {\\qed}{{$\qed$}}1
        {==<}{{$\equiv\!\!\langle\;$}}1
        {\\>}{{$\rangle$}}1
        {\\_}{{\!\!\_}}1
    }
   
\newcommand{\bin}[1]{\_#1\!\!\_}

%\usepackage{minion}
%\renewcommand{\scdefault}{ssc}
%\newfont{\chapnum}{eurb10 scaled 10000}
%\newcommand{\lowercaps}[1]{\textsc{\MakeLowercase{#1}}}
%\newcommand{\uppercaps}[1]{\textsc{\MakeUppercase{#1}}}

%% Balíček hyperref, kterým jdou vyrábět klikací odkazy v PDF,
%% ale hlavně ho používáme k uložení metadat do PDF (včetně obsahu).
%% POZOR, nezapomeňte vyplnit jméno práce a autora.
\usepackage{color}
\definecolor{link}{rgb}{0,0,0.5}
\usepackage[colorlinks=true,linkcolor=link,urlcolor=link,citecolor=link,unicode]{hyperref}
\hypersetup{pdftitle=On the semantics of exceptions for high level and low level languages}
\hypersetup{pdfauthor=Matus Tejiscak}

%%% Drobné úpravy stylu

% Tato makra přesvědčují mírně ošklivým trikem LaTeX, aby hlavičky kapitol
% sázel příčetněji a nevynechával nad nimi spoustu místa. Směle ignorujte.
%\makeatletter
%\def\@makechapterhead#1{
%  {\parindent \z@ \raggedright \normalfont
%   \Huge\bfseries \thechapter. #1
%   \par\nobreak
%   \vskip 20\p@
%}}
%\def\@makeschapterhead#1{
%  {\parindent \z@ \raggedright \normalfont
%   \Huge\bfseries #1
%   \par\nobreak
%   \vskip 20\p@
%}}
%\makeatother

% Toto makro definuje kapitolu, která není očíslovaná, ale je uvedena v obsahu.
\def\chapwithtoc#1{
\chapter*{#1}
\addcontentsline{toc}{chapter}{#1}
}

\newcommand{\ident}[1]{\mbox{\textsf{#1}}}
\newcommand{\midt}[1]{\mathsf{#1}}
%\newcommand{\to}{\rightarrow}

\newcommand{\lrule}[2]{%
  \noindent\hbox{{\vrule width #1}\hskip 0.7em\vbox{\noindent #2}}%
}

\newcommand{\myinset}[1]{\begin{wrapfigure}{r}{0.25\textwidth}%
\vspace{-1em}%
\parbox{0.228\textwidth}{%
\lrule{0.5pt}{\sloppy \raggedright \footnotesize #1}%
}\vspace{-1em}%
\end{wrapfigure}%
}

% don't forget to comment \usepackage{a4wide} if you use this
\newcommand{\marinset}[1]{\marginpar{\raisebox{-1.3\baselineskip}{%
\begin{minipage}[t]{\marginparwidth}%
\noindent \raggedright \footnotesize #1%
\end{minipage}%
}}}

\newcommand{\inset}[1]{\myinset{#1}}

%\newcommand{\todo}[1]{\noindent\mbox{\minipage{0.985\textwidth}\noindent\textsf{\textbf{TODO:} #1}\endminipage}\\}
\newcommand{\todo}[1]{\noindent\parbox{0.973\textwidth}{\lrule{5pt}{\textsf{\textbf{TODO:}} #1}}%
\vspace{0.5em}}

\newenvironment{agda}%
{\begingroup\sf\small\tabbing%
 \newcommand{\with}{\textbf{with}}
}
{\endtabbing\endgroup}

% TODO:
% - add \noindent after each \end{code}
